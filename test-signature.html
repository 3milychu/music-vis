<!DOCTYPE html>
<html>
  <head>
  <script src="https://d3js.org/d3.v5.min.js"></script>
    <style type="text/css">
      * { 
        font-family:"Helvetica Neue",Helvetica,Arial,sans-serif;
        font-size:13px;
      }
      circle {
        fill: black;
        fill-opacity: .8;
      }
      .curve {
        fill:none;
        stroke:black;
        stroke-linecap:round;
        animation:fadeIn 0.5s ease-in-out;
      }
      @keyframes fadeIn {
        0% {opacity:0}
        100% {opacity:1}
      }
    </style>
  </head>

  <body>

    <div id="canvas"></div>


    <script type="text/javascript">
      
function drawCircles(num_circles){

       var createNodes = function (numNodes, radius) {
         var nodes = [], 
             width = (radius * 2) + 50,
             height = (radius * 2) + 50,
             angle,
             x,
             y,
             i;
         for (i=0; i<numNodes; i++) {
          angle = (i / (numNodes/2)) * Math.PI; // Calculate the angle at which the element will be placed.
                                                // For a semicircle, we would use (i / numNodes) * Math.PI.
          x = (radius * Math.cos(angle)) + (width/2); // Calculate the x position of the element.
          y = (radius * Math.sin(angle)) + (width/2); // Calculate the y position of the element.
          nodes.push({'id': i, 'x': x, 'y': y});
         }
         return nodes;
       }

       var createSvg = function (radius, callback) {
         d3.selectAll('svg').remove();
         var svg = d3.select('#canvas').append('svg')
                    .attr('width', (radius * 2) + 50)
                    .attr('height', (radius * 2) + 50);
         callback(svg);
       }

       var createElements = function (svg, nodes, elementRadius) {
         element = svg.selectAll('circle')
                        .data(nodes)
                        .enter()
                        .append('circle')
                        .attr("id", function(d,i){return "person" + d.id})
                        .attr('r', elementRadius)
                        .attr('cx', function (d, i) {
                          return d.x;
                        })
                        .attr('cy', function (d, i) {
                          return d.y;
                        });
       }

       var draw = function () {
         var numNodes = num_circles;
         var radius = window.innerWidth/5;
         var nodes = createNodes(numNodes, radius);
         createSvg(radius, function (svg) {
           createElements(svg, nodes, 5);
         });
       }


       document.addEventListener('DOMContentLoaded', (event) => {
          draw();
        })
}


       function drawPath(point1_id, point2_id) {
            console.log(document.getElementById("person1"));
            var p1x = parseFloat(document.getElementById(point1_id).getAttribute("cx"));
            var p1y = parseFloat(document.getElementById(point1_id).getAttribute("cy"));
            var p2x = parseFloat(document.getElementById(point2_id).getAttribute("cx"));
            var p2y = parseFloat(document.getElementById(point2_id).getAttribute("cy"));

            // mid-point of line:
            var mpx = (p2x + p1x) * 0.5;
            var mpy = (p2y + p1y) * 0.5;

            // angle of perpendicular to line:
            var theta = Math.atan2(p2y - p1y, p2x - p1x) - Math.PI / 2;

            // distance of control point from mid-point of line:
            var offset = 30;

            // location of control point:
            var c1x = mpx + offset * Math.cos(theta);
            var c1y = mpy + offset * Math.sin(theta);

            c1x =mpx+50;
            c1y=mpy=50;

            // construct the command to draw a quadratic curve
            var curve = "M" + p1x + " " + p1y + " Q " + c1x + " " + c1y + " " + p2x + " " + p2y;

            path = d3.select('svg')
              .append('path')
              .attr("class","curve")
              .attr('d', curve);

            path
              .transition()        
              .duration(1000)
              .ease(d3.easeLinear)
        }

drawCircles(14);
setTimeout(function() {
  drawPath("person5", "person10");
}, 1)
setTimeout(function() {
  drawPath("person4", "person2");
},10)



    </script>
  </body>
</html>